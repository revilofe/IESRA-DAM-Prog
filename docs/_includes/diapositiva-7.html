<script src="https://unpkg.com/kotlin-playground@1" data-selector="code"></script>

<section>
    <section data-markdown>
        # Unidad 7
        ## Operaciones de entrada/Salida y GUI
    </section>
    <!--
        Bloques de diapositivas
    -->
    <section data-markdown>
        ## Resultado de Aprendizaje 5

        > Realiza operaciones de E/ y S/ usando el lenguaje y librerias

    </section>
    <section data-markdown>
        ## Criterios de evaluación
        - a) Se ha utilizado la consola para realizar operaciones de entrada y salida de información.
        - b) Se han aplicado formatos en la visualización de la información.
        - c) Se han reconocido las posibilidades de entrada/salida del lenguaje y las librerías asociadas.
        - d) Se han utilizado ficheros para almacenar y recuperar información.
        - e) Se han creado programas que utilicen diversos métodos de acceso al contenido de los ficheros.
        - f) Se han utilizado las herramientas del entorno de desarrollo para crear interfaces gráficos de usuario simples.
        - g) Se han programado controladores de eventos.
        - h) Se han escrito programas que utilicen interfaces gráficos para la entrada y salida de información.
    </section>
    <section data-markdown>
        ## Contenids mínimos:

        Información desde el sistema de archivos.
        1. Fundamentos de sistema de archivos.
            1.1. Archivos (Texto, Binarios)
            1.2. Directorios.
            1.3. Flujos de E/S (Texto, Bytes)
        2. La consola y el teclado (RA5.a, b)
            2.1. Escribir por consola
            2.2. Lectura desde teclado
            2.3. Formato a la información. (Scanner & println)
        3. API para trabajar con ficheros (RA5.c)
        4. Trabajar con ficheros (RA5.d, e)
            4.1. Texto
            4.2. Binarios
    </section>
    <section data-markdown>
        ## Contenidos mínimos:

        Información desde interfaz gráfica de usuario
        5. Elementos básicos de una interface (RA5.f)
        6. Gestión de eventos (RA5.g)
            6.1. Eventos
            6.2. Controlador de eventos
        7. Uso de GUI para E/S de información (RA5.h)
    </section>

    <section data-markdown>
        *********************
    </section>

    <!--
        Bloques de diapositivas
    -->

    <!--
OBJETIVOS DIDACTIVOS

Información desde el sistema de archivos.
1. Reconocer los paquetes y funciones más importantes para las operaciones de entrada/salida. (RA5.c)
2. Utilizar la consola para operaciones de entrada y salida. (RA5.a)
3. Aplicar formato a la visualización de la información (RA5.b)
4. Usar ficheros para recuperar y almacenar información. (RA5.d)
5. Desarrollar programas que usen diversos métodos de acceso al contenido de programas. (RA5.e)

Información desde interfaz gráfica de usuario
6. Creación y uso de una Interfaces gráficas de usuario simples (RA5.f)
7. Entender el funcionamiento de un controlador de eventos. (RA5.g)
8. Desarrollar una igu para la entrada y salida de información. (RA5.h)


CONTENIDOS

Información desde el sistema de archivos.
1. Fundamentos de sistema de archivos.
    1.1. Archivos (Texto, Binarios)
    1.2. Directorios.
    1.3. Flujos de E/S (Texto, Bytes)
2. La consola y el teclado (RA5.a, b)
    2.1. Escribir por consola
    2.2. Lectura desde teclado
    2.3. Formato a la información. (Scanner & println)
3. API para trabajar con ficheros (RA5.c)
4. Trabajar con ficheros (RA5.d, e)
    4.1. Texto
    4.2. Binarios

Información desde interfaz gráfica de usuario
5. Elementos básicos de una interface (RA5.f)
6. Gestión de eventos (RA5.g)
    6.1. Eventos
    6.2. Controlador de eventos
7. Uso de GUI para E/S de información (RA5.h)

    -->

    <section data-markdown>
        ## Aplicaciones y sistema de archivos

        - ¿Principal función de una aplicación informática?
        ![center](images/programa.gif)
        - Trabajamos con datos, variables.... ¿Que pasa cuando se cierra la aplicación?
        - ¿Que nos facilita el sistema de Archivos?
        - ¿Que elementos puedes encontrar en un [sistema de archivos](https://es.wikipedia.org/wiki/Sistema_de_archivos)?

    </section>
    <section data-markdown>
        ## Aplicaciones y sistema de archivos

        - La gestión del **sistema de archivos** ¿es una función del ... ?
        - Los lenguajes de programación también proporcionan su propia biblioteca para trabajar con el sistema de archivos
        - Kotlin ofrece un conjunto de clases incluidas dentro del [Package `kotlin.io`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/)
        - Estas clases están basadas en las ofrecidas por Java en el package `java.io`.
        - Mediante la invocación de los métodos adecuados definidos de estas clases es posible llevar a cabo prácticamente cualquier tarea sobre el sistema de archivos.

    </section>

    <section data-markdown>
        ## Flujos

        En Kotlin, heredado de Java, se define la abstracción de stream (flujo) para tratar la comunicación de información entre el programa y el exterior
        - Entre una fuente y un destino fluye una secuencia de datos

        Los flujos actúan como interfaz con el dispositivo o clase asociada
        - Operación independiente del tipo de datos y del dispositivo
        - Mayor flexibilidad (p.e. redirección, combinación)
        - Diversidad de dispositivos (fichero, pantalla, teclado, red, …)
        - Diversidad de formas de comunicación
            - Modo de acceso: secuencial, aleatorio
            - Información intercambiada: binaria, caracteres, líneas
        ![center](images/flujo1.png)
    </section>

    <section data-markdown>
        ## Flujos

        Como en Unix:
        - Entrada estándar - habitualmente el teclado
        - Salida estándar - habitualmente la consola
        - Salida de error - habitualmente la consola

        En Java se accede a la E/S estándar a través de campos estáticos de la clase `java.lang.System`
        - `System.in` implementa la entrada estándar
        - `System.out` implementa la salida estándar
        - `System.err` implementa la salida de error

        ![center](images/flujo2.png)
        Curiosidad: Mira la implementación de `println()`, `readline()`
    </section>

    <section data-markdown>
        ## E/S por Consola (RA5.a, b)

        - ![left](images/link.png) [Lectura y escritura en entrada y salida estándar](https://github.com/revilofe/IESRA-DAM-Prog/blob/master/ejercicios/src/main/kotlin/un7/IO.md#3-lectura-y-escritura-en-entrada-y-salida-estandar)

        ### API:
        - Escribir: `print`, `println`
        - Leer: `readline`, `readln`
            - **Evita el uso de `!!`**
            - Haz uso de `try` y `?:`
            - Haz uso de `?` y `toIntOrNull` y similares
        - Formato: `String.Format`

    </section>

    <section data-markdown>
        ## API para trabajar con ficheros (RA5.c)

        - La clases mas básica para operar con archivos es la clase `File`, ubicada en el package `java.io` de java.
            - habrá que importarla `import java.io.File`
            - `File`, ademas, representa la ruta dentro del sistema de archivos.
        - Esta clase permite manipular *cualquier aspecto vinculado al sistema de archivos*:
            -   Ficheros: abrir, cerrar, renombrar,...
            -   Directorios: abrir, listar contenido,...


    </section>
    <section data-markdown>
        ## API para trabajar con ficheros (RA5.c)

        - `File` tendremos que instanciarla y recibe como argumento una `String` que corresponde a la ruta del archivo.
            - La ruta, **Path** en inglés, contiene el camino al archivo o directorio, junto al nombre.
            - La ruta, es única en un sistema de archivos.
            - La ruta puede ser relativa y absoluta.
        ~~~Kotlin
        val ruta = "./data.txt"
        val f = File(ruta)
        ~~~

    </section>
    <section data-markdown>
        ## API para trabajar con ficheros (RA5.c)

        - Sobre la ruta podemos decir:
            - Que dependen del sistema de archivos: Por ejemplo, Windows (`C:\` y `\`) y Linux (`/var` y `/`)
            - Kotlin nos permite usar `/` para representar rutas.
            - Un objeto `File` representa solo una ruta. Para varias rutas, habrá que crear farios objetos `File`'s

        ~~~Kotlin
        var carpetaFotos: File = File("C:/Fotos")
        var unaFoto: File = File("C:/Fotos/Foto1.png")
        var otraFoto: File = File("C:/Fotos/Foto2.png")
        ~~~

    </section>
    <section data-markdown>
        ## API para trabajar con ficheros (RA5.c)

        - ***Actividad individual:***
        Accede al ejemplo, ejecutalo y investiga y actúa para que el programa responda `true` a la pregunta ¿Existe? y ¿archivo? ¿carpeta?

        [Ejemplo 1](https://github.com/revilofe/IESRA-DAM-Prog/blob/master/ejercicios/src/main/kotlin/un7/E01ExisteYTipo.kt)

    </section>
    <section data-markdown>
        ## API para trabajar con ficheros (RA5.c)
        - Conceptos:
            - **Raíz**: Punto de inicio de la estructura de archivos. La Raíz depende del sistema operativo.
            - **Directorio de trabajo**: Directorio que se asigna a un programa cuando se ejecuta, normalmente el directorio en el que esta el ejecutable.

        *¿Cual es el directorio de trabajo de nuestro IDE, cuando ejecutamos un proyecto?*

        - Rutas relativas y absolutas
            - **Absoluta**: Referencia de un objeto desde la raíz.
            - **Relativa**: Referencia a un objeto desde el directorio de trabajo. El directorio de trabajo puede cambiar cada vez que se ejecuta el programa.


        *¿Cuando usar una y cuando usar otra?*

    </section>
    <section data-markdown>
        ## API para trabajar con ficheros (RA5.c)

        - La ruta relativa es similar a la absoluta, pero nunca se indica la raiz.
        - Incluye la raíz a pesar de indicarse.
        - Permite la portabilidad del software.

        Por ejemplo:

        ```kotlin
        val f = File("Unidad11/apartado1/Actividades.txt")
        ```

        Dependiendo del directorio de trabajo sería:

        | Directorio de trabajo | Ruta real |
        | :--------------------------: | :-------------------------------------------------------: |
        | `C:/Proyectos/Java`       | `C:/Proyectos/Java/Unidad11/apartado1/Actividades.txt` |
        | `X:/Unidades`       | `X:/Unidades/Unidad11/apartado1/Actividades.txt` |
        | `/Programas`       | `/Programas/Unidad11/apartado1/Actividades.txt` |

    </section>
    <section data-markdown>
        ## API para trabajar con ficheros (RA5.c)

        - ***Actividad individual:***
        Accede al ejemplo, ejecutalo y investiga y actúa para que el programa muestre información de las dos rutas relativas y absolutas.

        [Ejemplo 2](https://github.com/revilofe/IESRA-DAM-Prog/blob/master/ejercicios/src/main/kotlin/un7/E02RutaRelativaAbsoluta.kt)

    </section>

    <section data-markdown>
        ## API para trabajar con ficheros (RA5.c)

        [File Java 17](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/File.html)
        [File Kotlin](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/java.io.-file/)

        - `FIle`: Obtener la ruta
            - `getParent`:  devuelve la ruta de la carpeta del elemento referido por esta ruta.
            - `getName`: devuelve el nombre del elemento que representa en la ruta.
            - `getAbosultePath`: devuelve la ruta absoluta.

        [Ver Ejemplo 2](https://github.com/revilofe/IESRA-DAM-Prog/blob/master/ejercicios/src/main/kotlin/un7/E02RutaRelativaAbsoluta.kt)

    </section>
    <section data-markdown>
        ## API para trabajar con ficheros (RA5.c)
        - `FIle`: Comprobaciones de estado
            - `exists`:  devuelve la ruta de la carpeta del elemento referido por esta ruta.
            - `isFile`: devuelve el nombre del elemento que representa en la ruta.
            - `isDirectory`: devuelve la ruta absoluta.

        [Ver Ejemplo 1](https://github.com/revilofe/IESRA-DAM-Prog/blob/master/ejercicios/src/main/kotlin/un7/E01ExisteYTipo.kt)

    </section>
    <section data-markdown>
        ## API para trabajar con ficheros (RA5.c)
        - `FIle`: Propiedades de ficheros
            - `length`:  devuelve la ruta de la carpeta del elemento referido por esta ruta.
            - `lastModified`: devuelve el nombre del elemento que representa en la ruta.


        [Ver Ejemplo 1](https://github.com/revilofe/IESRA-DAM-Prog/blob/master/ejercicios/src/main/kotlin/un7/E01ExisteYTipo.kt)

    </section>
    <section data-markdown>
        ## API para trabajar con ficheros (RA5.c)

        - ***Actividad individual evaluable:***
        [6.1 De los 4 tipos vistos, pon ejemplo de 2](https://educacionadistancia.juntadeandalucia.es/centros/cadiz/mod/assign/view.php?id=436534)
    </section>

    <section data-markdown>

    </section>
    <section data-markdown>
        ## BIBLIOGRAFÍA
        - ![left](images/link.png) [https://kotlinlang.org/](https://kotlinlang.org)
        - ![left](images/link.png) [https://www.fdi.ucm.es/profesor/jpavon/poo/2.13.EntradaySalida.pdf](https://www.fdi.ucm.es/profesor/jpavon/poo/2.13.EntradaySalida.pdf)
        - ![left](images/link.png) [Apuntes de kotlin](https://github.com/revilofe/_kotlin_)
        - ![left](images/link.png) [Clases abstractas, interfaces, herencia] (https://code.tutsplus.com/es/tutorials/kotlin-from-scratch-abstract-classes-interfaces-inheritance-and-type-alias--cms-29744)

    </section>


</section>






